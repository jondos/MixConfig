<html>
<head>
	<link rel="stylesheet" type="text/css" href="xhelpfrms.css">
</head>

<body>
<!--#include virtual="/header_en.html"-->

<h2>Admin scripts</h2>

This manual covers helper scripts for theMIX server, an InfoService, a firewall and
a web proxy.

<h3>Setting up a web proxy for the last MIX server</h3>
A last MIX server is unique in the way that it's not connected to a next MIX server
but to a web-proxy. There are several web proxy servers a MIX can work with.
We recommend using Squid. For further information visit it's website at:

	<blockquote>
		<a href="http://www.squid-cache.org/">http://www.squid-cache.org/</a>
	</blockquote>

<p>In most Linux distributions, for example in Novell SuSE Linux or Debian GNU/Linux,
you can use your package management system to get binaries of Squid. Both systems
ship it - if not in the standard installation than you can get it either from
your installation media or online from a mirror.
Of course you may also compile it manually. Check on the quoted Squid website
	for more information.</p>
Here is an exemplary configuration file for Squid that will fit in most scenarios:
	<blockquote>
		<a href="squid.conf">Squid example configuration</a>
	</blockquote>

<h3>Directories</h3>
To run the mix (and optionally an InfoService) you have to create the following
directories:
	<blockquote>
		<code>
			/home/mix/Mixproxy		</code>binaries and configuration for MIX server<code><br></br>
			/home/mix/InfoService	</code>binaries and configuration for InfoService<code><br></br>
			/home/mix/InfoService/log	</code>Status statistics of InfoService<code><br></br>
		</code>
	</blockquote>

To create a directory, type

	<blockquote>
		<code>
			mkdir [directory name]
		</code>
	</blockquote>


In each of the directories the subdirectories

	<blockquote>
		<code>
			./backup<br></br>
			./cvs<br></br>
		</code>
	</blockquote>

will be generated by the scripts.<code>./backup</code> holds old binaries and their
log files. As you see you may easily go back to an old but working installation if an
update has failed.
In <code>./cvs</code> the source files are stored (and overwritten) when getting a new
source code version.


<h3>Config files</h3>
For running the mix, you only need the config file generated by the MixConfig tool.
It is recommended to name it <code>config.xml</code>, otherwise you will have to
adapt an other script. There is also a firewall config file, but if you want to use
it, you will have to adapt it to your needs.
	<blockquote>
		<code>
			<li><a href="firewall">/home/mix/firewall</a>
				</code>your MIX server firewall settings (optional)<code><br></br>
			/home/mix/Mixproxy/config.xml
				</code>config file for the MIX server<code><br></br>
			/home/mix/InfoService/Infoservice.properties
				</code>config file for the MIX server<code><br></br>
			/home/mix/sysctl.conf
				</code>settings of the keep-alive times<code><br></br>
		</code>
	</blockquote>

<h3>Log files</h3>

	<blockquote>
		<code>
			/var/log/messages
				</code>messages / logging of your firewall<code><br></br>
			/home/mix/Mixproxy/messages
				</code>messages / logging of the MIX server<code><br></br>
			/home/mix/InfoService/InfoService.log
				</code>messages / logging of InfoService<code><br></br>
			/home/mix/InfoService/log/
				</code>status logs of your cascade<code><br></br>
		</code>
	</blockquote>

New messages will be appended on the end of the logfile. InfoService can have
more than just one logfile but should be configured with just one central log.

<h3>Executables</h3>

	<blockquote>
		<code>
			/home/mix/runANONServer
				</code>script to start and shutdown the MIX and InfoService<code><br></br>
			/home/mix/Mixproxy/proxytest
				</code>MIX server binary<code><br></br>
			/home/mix/Mixproxy/runMixproxy
				</code>script to start and shutdown of the MIX and InfoService<code><br></br>
			/home/mix/Mixproxy/Mixconfig.jar
				</code>MixConfig Tool to configure a MIX<code><br></br>
			/home/mix/InfoService/InfoService.jar
				</code>InfoService binary / executable jar<code><br></br>
			/home/mix/InfoService/runInfoService
				</code>script to start and shutdown InfoService<code><br></br>
			/home/mix/firewall
				</code>script to start and shutdown your firewall<code><br></br>
		</code>
	</blockquote>

<h3>Runlevel links</h3>
If you want the services started automatically when starting the server machine, you have
to set links to the executables in runlevel 3 and runlevel 5.

	<blockquote>
		<code>
			/etc/init.d/firewall -> /home/mix/firewall
				</code>link to your firewall<code><br></br>
			/etc/init.d/mixproxy -> /home/mix/Mixproxy/runMixproxy
				</code>link to the MIX server<code><br></br>
			/etc/init.d/infoservice -> /home/mix/InfoService/runInfoService
				</code>link to the InfoService<code><br></br>
			/etc/sysctl.conf -> /home/mix/Mixproxy/sysctl.conf
				</code>link to changed kernelsettings
						(run by: <code>/etc/init.d/boot.sysctl</code>)
				<code><br></br>
		</code>
	</blockquote>

<h3>Execution</h3>
The firewall has to be started with 'root' rights. If you do not have 'root'
rights it's normally also ok to restart the system. This will automatically
also restart the the firewall with 'root' privileges.<br></br>
The MIX server, InfoService and the firewall can be started with running
the skripts with the 'start', 'stop' and 'restart' options. With the
'process' option' you can list the running processes, 'log' will list the
log file entries. 'status' shows you if the servers are running at the moment.
<br></br>
Following links are set:

	<blockquote>
		<code>
			/usr/bin/firewall </code> points to and entry in <code>
				/etc/init.d<br></br>
			/usr/bin/mixproxy </code> points to and entry in <code>
				/etc/init.d<br></br>
			/usr/bin/infoservice </code> points to and entry in <code>
				/etc/init.d<br></br>
			/etc/rc.status.anon </code> points to an entry in <code>
				/home/mix/rc.status.anon<br></br>
		</code>
	</blockquote>

If the MIX server has connected properly to a cascade is indicated by -
executing with the 'process' option - more than one running instances of
the server process. This can take about a minute.<br></br>
Another indication is to check at the end of the logfile for an entry "connected".

<h3>Default runlevel</h3>

The default runlevel has been set to 3 so that the the graphical environment
will not be loaded. This can be changed by the administrator either while the
system is running with:

	<blockquote>
		<code>
			init 5
		</code>
	</blockquote>
or permanently with editing the <code>/etc/inittab</code> entries.

<!--#include virtual="/footer_en.html"-->
</body>
</html>
